import{relative as i}from"node:path";import s from"ora";import"./protocol.js";class h{constructor(t,e){this.check=e;t||(this.spinner=s("Starting...").start())}total=0;reformatted=0;failed=0;spinner;update(t){if(this.total+=t.files,this.reformatted+=t.formatted.length,this.failed+=t.failed.length,t.formatted.length>0){this.spinner&&this.spinner.stop();for(const e of t.formatted)process.stdout.write(`${i(e.base,e.path)}\r
`);this.spinner&&(this.spinner.text=this.getMessage(),this.spinner.start())}else this.spinner&&(this.spinner.text=this.getMessage())}complete(){this.spinner&&(this.check&&this.reformatted?this.spinner.fail(`${this.reformatted} files were not formatted`):this.spinner.succeed(this.getMessage()))}getMessage(){return this.check?`Checked ${this.total} files`:`Reformatted ${this.reformatted} / ${this.total} files...`}}export{h as ProgressReporter};
